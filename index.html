<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MOD Free Fire Max (AES)</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <style>
    body { background: #000; color: white; font-family: Arial; padding: 20px; }
    .box { background: #111; border-radius: 10px; padding: 20px; max-width: 400px; margin: auto; box-shadow: 0 0 10px #ff3c3c88; }
    h2 { color: red; }
    .mod-option { margin: 10px 0; }
    input[type="checkbox"] { transform: scale(1.2); margin-right: 8px; }
    input[type="text"] { width: 100%; padding: 8px; font-size: 14px; margin-top: 8px; border-radius: 5px; border: none; }
    button { background: red; color: white; border: none; width: 100%; padding: 12px; font-size: 16px; margin-top: 10px; border-radius: 6px; cursor: pointer; }
    button.secondary { background: #333; margin-top: 6px; }
    .status { margin-top: 15px; font-size: 14px; color: #00ff99; }
    .json-output { background: #222; color: #00ffff; padding: 10px; margin-top: 10px; font-size: 13px; border-radius: 6px; word-break: break-word; }
  </style>
</head>
<body>
  <div class="box">
    <h2>‚úÖ Menu Config | Admin: Ank L√† P√¥ N√¥</h2>

    <div class="mod-option"><label><input type="checkbox" id="mod1"> Auto Ghim ƒê·∫ßu 70%</label></div>
    <div class="mod-option"><label><input type="checkbox" id="mod2"> Fix L·ªë ƒê·∫ßu / Gi·∫≠t T√¢m</label></div>
    <div class="mod-option"><label><input type="checkbox" id="mod3"> Buff M√†n H√¨nh Si√™u M∆∞·ª£t</label></div>
    <div class="mod-option"><label><input type="checkbox" id="mod4"> Fix Lag M√†n H√¨nh</label></div>
    <div class="mod-option"><label><input type="checkbox" id="mod5"> üåé Bug Max Nh·∫°y M√†n</label></div>
    <div class="mod-option"><label><input type="checkbox" id="mod6"> üñ•Ô∏è K√≠ch Ho·∫°t Menu</label></div>

    <div class="mod-option">
      <label>üîê Nh·∫≠p UDID m√°y:</label>
      <input type="text" id="udid" placeholder="D√°n UDID iOS t·∫°i ƒë√¢y...">
    </div>

    <button onclick="activateMOD()">‚ö° K√≠ch Ho·∫°t MOD</button>
    <button class="secondary" onclick="resetConfig()">üóëÔ∏è Reset C·∫•u H√¨nh</button>
    <button class="secondary" onclick="exportConfig()">üì§ Xu·∫•t Config (AES)</button>

    <div class="status" id="status">Tr·∫°ng th√°i: ƒêang ch·ªù k√≠ch ho·∫°t...</div>
    <div id="jsonOutput" class="json-output" style="display:none;"></div>
  </div>

  <script>
    const checkboxIds = ["mod1", "mod2", "mod3", "mod4", "mod5", "mod6"];
    const udidInput = document.getElementById("udid");
    const status = document.getElementById("status");
    const jsonOutput = document.getElementById("jsonOutput");

    const AES_KEY = "xKwzY7S3w9Bt4Rj0u5Lm2HnPqCvVaZ1G"; // ‚úÖ Kh√≥a AES an to√†n
    const SERVER_ENDPOINT = "https://yourserver.com/api/receive.php"; // ‚úÖ Server nh·∫≠n d·ªØ li·ªáu

    // ‚úÖ Th√™m UDID c·ªßa b·∫°n v√†o ƒë√¢y
    const whitelistUDIDs = [
      "00008030-000459313C09802E", // v√≠ d·ª•
      "00008030-000538462278C02E", // v√≠ d·ª•
"00008101-001215CA3604001E", // v√≠ d·ª•
"00008030-001D28491A52802E", // v√≠ d·ª•
"00008120-001A1C1C0AC0C01E"
    ];

    function encryptAES(data, key) {
      return CryptoJS.AES.encrypt(JSON.stringify(data), key).toString();
    }

    function decryptAES(cipher, key) {
      try {
        const bytes = CryptoJS.AES.decrypt(cipher, key);
        return JSON.parse(bytes.toString(CryptoJS.enc.Utf8));
      } catch (e) {
        return null;
      }
    }

    // Load d·ªØ li·ªáu t·ª´ localStorage khi m·ªü
    window.addEventListener("load", () => {
      const stored = localStorage.getItem("ff_config_aes");
      if (stored) {
        const decrypted = decryptAES(stored, AES_KEY);
        if (decrypted) {
          udidInput.value = decrypted.udid || "00008030-000459313C09802E",
"00008030-000538462278C02E",
"00008101-001215CA3604001E",
"00008030-001D28491A52802E",
"00008120-001A1C1C0AC0C01E";
          checkboxIds.forEach(id => document.getElementById(id).checked = !!decrypted[id]);
        }
      }
      updateStatus();
    });

    function saveConfig() {
      const config = { udid: udidInput.value.trim() };
      checkboxIds.forEach(id => config[id] = document.getElementById(id).checked);
      const encrypted = encryptAES(config, AES_KEY);
      localStorage.setItem("ff_config_aes", encrypted);
    }

    udidInput.addEventListener("input", () => { saveConfig(); updateStatus(); });
    checkboxIds.forEach(id => {
      document.getElementById(id).addEventListener("change", () => {
        saveConfig();
        updateStatus();
      });
    });

    function updateStatus() {
      const mods = [];
      const udid = udidInput.value.trim();
      if (document.getElementById("mod1").checked) mods.push("Auto Ghim ƒê·∫ßu");
      if (document.getElementById("mod2").checked) mods.push("Fix L·ªë ƒê·∫ßu");
      if (document.getElementById("mod3").checked) mods.push("Buff M∆∞·ª£t");
      if (document.getElementById("mod4").checked) mods.push("Hack Damage");
      if (document.getElementById("mod5").checked) mods.push("Full ƒê·ªè");
      if (document.getElementById("mod6").checked) mods.push("iMazing");

      status.textContent = mods.length > 0
        ? `‚úÖ ƒê√£ b·∫≠t: ${mods.join(", ")} | UDID: ${udid || "ch∆∞a nh·∫≠p"}`
        : `Tr·∫°ng th√°i: Ch·ªù k√≠ch ho·∫°t... | UDID: ${udid || "ch∆∞a nh·∫≠p"}`;
    }

    function activateMOD() {
      const udid = udidInput.value.trim();
      if (!whitelistUDIDs.includes(udid)) {
        alert("‚ùå UDID kh√¥ng n·∫±m trong whitelist.");
        return;
      }

      saveConfig();
      updateStatus();
      sendToServer();

      alert("‚úÖ MOD ƒë√£ k√≠ch ho·∫°t. ƒêang m·ªü Free Fire Max...");

      
      const deepLink = "garena://freefiremax";
      const fallback = "https://apps.apple.com/app/id1480516828";
      window.location = deepLink;
      setTimeout(() => {
        window.location = fallback;
      }, 2000); // fallback sau 2 gi√¢y n·∫øu ch∆∞a m·ªü ƒë∆∞·ª£c app
    }

    function resetConfig() {
      if (confirm("B·∫°n ch·∫Øc ch·∫Øn mu·ªën x√≥a c·∫•u h√¨nh?")) {
        localStorage.removeItem("ff_config_aes");
        udidInput.value = "00008030-000459313C09802E",
"00008030-000538462278C02E",
"00008101-001215CA3604001E",
"00008030-001D28491A52802E",
"00008120-001A1C1C0AC0C01E";
        checkboxIds.forEach(id => document.getElementById(id).checked = false);
        updateStatus();
        jsonOutput.style.display = "none";
      }
    }

    function exportConfig() {
      const stored = localStorage.getItem("ff_config_aes");
      if (stored) {
        jsonOutput.textContent = `üîê D·ªØ li·ªáu AES:\n${stored}`;
        jsonOutput.style.display = "block";
      } else {
        jsonOutput.textContent = "‚ö†Ô∏è Kh√¥ng c√≥ d·ªØ li·ªáu.";
        jsonOutput.style.display = "block";
      }
    }

    function sendToServer() {
      const stored = localStorage.getItem("ff_config_aes");
      if (!stored) return;
      fetch(SERVER_ENDPOINT, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ data: stored })
      }).then(r => r.json()).catch(console.error);
    }
  </script>
</body>
</html>